<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Trading Signals</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .timer {
            text-align: center;
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: 1.1em;
        }

        .timer-number {
            font-weight: bold;
            color: #667eea;
            font-size: 1.3em;
        }

        .signal {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid;
            animation: fadeIn 0.5s ease-in;
            backdrop-filter: blur(10px);
        }

        .signal.down {
            border-left-color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }

        .signal.up {
            border-left-color: #44ff44;
            background: rgba(68, 255, 68, 0.1);
        }

        .signal-emoji {
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 10px;
        }

        .signal-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .signal-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }

        .timestamp {
            text-align: center;
            font-size: 0.9em;
            color: #888;
            margin-top: 10px;
        }

        .price-change {
            font-weight: bold;
        }

        .change-up {
            color: #44ff44;
        }

        .change-down {
            color: #ff4444;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 20px;
        }

        .error {
            background: rgba(255, 68, 68, 0.2);
            color: #ff8888;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 10px 0;
        }

        .api-status {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            font-size: 0.9em;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #888;
        }

        .status-dot.active {
            background: #44ff44;
        }

        .signal-type-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        .crypto-badge {
            background: rgba(102, 126, 234, 0.3);
            color: #667eea;
        }

        .forex-badge {
            background: rgba(255, 193, 7, 0.3);
            color: #ffc107;
        }

        .no-signals {
            text-align: center;
            color: #888;
            padding: 40px 20px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Live Trading Signals</h1>
            <p>‚è∞ Updates every minute</p>
            
            <div class="controls">
                <button class="filter-btn active" data-filter="all">All Signals</button>
                <button class="filter-btn" data-filter="crypto">Crypto Only</button>
                <button class="filter-btn" data-filter="forex">Forex Only</button>
            </div>

            <div class="timer">
                Next signal in: <span class="timer-number" id="countdown">60</span> seconds
            </div>

            <div class="api-status">
                <div class="status-item">
                    <div class="status-dot active" id="statusCrypto"></div>
                    <span>Crypto API</span>
                </div>
                <div class="status-item">
                    <div class="status-dot active" id="statusForex"></div>
                    <span>Forex API</span>
                </div>
            </div>
        </div>
        <div id="signalsContainer">
            <div class="loading">Loading first signal...</div>
        </div>
    </div>

    <script>
        class TradingSignalFrontend {
            constructor() {
                this.forexPairs = ["EUR/USD", "GBP/USD", "USD/JPY", "USD/CHF", "AUD/USD", "USD/CAD", "NZD/USD"];
                this.cryptoPairs = ["BTC/USD", "ETH/USD", "ADA/USD", "DOT/USD", "LTC/USD", "XRP/USD"];
                this.timeframes = ["3 MIN", "5 MIN", "7 MIN", "10 MIN", "15 MIN"];
                this.amounts = ["1k", "1.5k", "2k", "2.5k", "3k"];
                this.container = document.getElementById('signalsContainer');
                this.countdownElement = document.getElementById('countdown');
                
                this.currentFilter = 'all';
                this.signals = [];
                this.nextSignalTime = Date.now() + 60000;
                this.countdownInterval = null;
                
                // API endpoints
                this.apis = {
                    crypto: 'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,cardano,polkadot,litecoin,ripple&vs_currencies=usd&include_24hr_change=true',
                    forex: 'https://api.frankfurter.app/latest?from=USD'
                };

                this.initEventListeners();
                this.startCountdown();
            }

            initEventListeners() {
                // –§–∏–ª—å—Ç—Ä—ã
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.currentFilter = e.target.dataset.filter;
                        this.renderSignals();
                    });
                });
            }

            startCountdown() {
                this.updateCountdown();
                this.countdownInterval = setInterval(() => {
                    this.updateCountdown();
                }, 1000);
            }

            updateCountdown() {
                const now = Date.now();
                const timeLeft = Math.max(0, Math.floor((this.nextSignalTime - now) / 1000));
                
                this.countdownElement.textContent = timeLeft;
                
                if (timeLeft === 0) {
                    this.nextSignalTime = now + 60000;
                }
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å CoinGecko API
            async fetchCryptoData() {
                try {
                    const response = await fetch(this.apis.crypto);
                    if (!response.ok) throw new Error('Crypto API failed');
                    const data = await response.json();
                    
                    const cryptoMap = {
                        'bitcoin': 'BTC/USD',
                        'ethereum': 'ETH/USD', 
                        'cardano': 'ADA/USD',
                        'polkadot': 'DOT/USD',
                        'litecoin': 'LTC/USD',
                        'ripple': 'XRP/USD'
                    };

                    const cryptoIds = Object.keys(cryptoMap);
                    const randomCryptoId = cryptoIds[Math.floor(Math.random() * cryptoIds.length)];
                    const cryptoData = data[randomCryptoId];
                    
                    return {
                        type: 'crypto',
                        symbol: cryptoMap[randomCryptoId],
                        amount: this.amounts[Math.floor(Math.random() * this.amounts.length)],
                        time: this.timeframes[Math.floor(Math.random() * this.timeframes.length)],
                        direction: cryptoData.usd_24h_change > 0 ? "UP" : "DOWN",
                        emoji: cryptoData.usd_24h_change > 0 ? "üü¢" : "üî¥",
                        price: `$${cryptoData.usd.toLocaleString()}`,
                        change: cryptoData.usd_24h_change,
                        timestamp: new Date().toLocaleTimeString(),
                        id: Date.now() + Math.random()
                    };
                } catch (error) {
                    console.error('Crypto API Error:', error);
                    this.updateStatus('crypto', false);
                    throw error;
                }
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ Forex –¥–∞–Ω–Ω—ã—Ö —Å Frankfurter API
            async fetchForexData() {
                try {
                    const response = await fetch(this.apis.forex);
                    if (!response.ok) throw new Error('Forex API failed');
                    const data = await response.json();
                    
                    const forexPairs = Object.keys(data.rates);
                    const randomPair = forexPairs[Math.floor(Math.random() * forexPairs.length)];
                    const rate = data.rates[randomPair];
                    
                    const mockChange = (Math.random() - 0.5) * 2;
                    
                    return {
                        type: 'forex',
                        symbol: `USD/${randomPair}`,
                        amount: this.amounts[Math.floor(Math.random() * this.amounts.length)],
                        time: this.timeframes[Math.floor(Math.random() * this.timeframes.length)],
                        direction: mockChange > 0 ? "UP" : "DOWN",
                        emoji: mockChange > 0 ? "üü¢" : "üî¥",
                        price: rate.toFixed(4),
                        change: mockChange,
                        timestamp: new Date().toLocaleTimeString(),
                        id: Date.now() + Math.random()
                    };
                } catch (error) {
                    console.error('Forex API Error:', error);
                    this.updateStatus('forex', false);
                    throw error;
                }
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∫–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
            generateMockSignal(type) {
                const symbols = type === 'crypto' ? this.cryptoPairs : this.forexPairs;
                const symbol = symbols[Math.floor(Math.random() * symbols.length)];
                const direction = Math.random() > 0.5 ? "UP" : "DOWN";
                const mockChange = (Math.random() - 0.5) * 10;
                
                return {
                    type: type,
                    symbol: symbol,
                    amount: this.amounts[Math.floor(Math.random() * this.amounts.length)],
                    time: this.timeframes[Math.floor(Math.random() * this.timeframes.length)],
                    direction: direction,
                    emoji: direction === "UP" ? "üü¢" : "üî¥",
                    price: type === 'crypto' ? `$${(Math.random() * 50000).toFixed(2)}` : (Math.random() * 2).toFixed(4),
                    change: mockChange,
                    timestamp: new Date().toLocaleTimeString(),
                    isMock: true,
                    id: Date.now() + Math.random()
                };
            }

            updateStatus(apiType, isActive) {
                const element = document.getElementById(`status${apiType.charAt(0).toUpperCase() + apiType.slice(1)}`);
                if (element) {
                    element.className = `status-dot ${isActive ? 'active' : ''}`;
                }
            }

            renderSignals() {
                this.container.innerHTML = '';
                
                const filteredSignals = this.signals.filter(signal => {
                    if (this.currentFilter === 'all') return true;
                    return signal.type === this.currentFilter;
                });

                if (filteredSignals.length === 0) {
                    this.container.innerHTML = `
                        <div class="no-signals">
                            No ${this.currentFilter === 'all' ? '' : this.currentFilter} signals yet
                        </div>
                    `;
                    return;
                }

                filteredSignals.forEach(signal => {
                    this.createSignalElement(signal);
                });
            }

            createSignalElement(signal) {
                const signalElement = document.createElement('div');
                signalElement.className = `signal ${signal.direction.toLowerCase()}`;
                
                const changeClass = signal.change > 0 ? 'change-up' : 'change-down';
                const changeSign = signal.change > 0 ? '+' : '';
                const typeBadge = signal.type === 'crypto' ? 'crypto-badge' : 'forex-badge';
                const typeText = signal.type === 'crypto' ? 'CRYPTO' : 'FOREX';
                
                signalElement.innerHTML = `
                    <div class="signal-emoji">
                        ${signal.emoji} SIGNAL ${signal.emoji}
                        <span class="signal-type-badge ${typeBadge}">${typeText}</span>
                    </div>
                    <div class="signal-info">
                        <div class="signal-item">
                            <span>üí±</span>
                            <strong>Asset:</strong> ${signal.symbol}
                        </div>
                        <div class="signal-item">
                            <span>üí∞</span>
                            <strong>Investing amount:</strong> ${signal.amount}
                        </div>
                        <div class="signal-item">
                            <span>‚è≥</span>
                            <strong>Trade Time:</strong> ${signal.time}
                        </div>
                        <div class="signal-item">
                            <span>üìä</span>
                            <strong>Signal:</strong> ${signal.direction}
                        </div>
                        <div class="signal-item">
                            <span>üíµ</span>
                            <strong>Price:</strong> ${signal.price}
                        </div>
                        <div class="signal-item">
                            <span>üìà</span>
                            <strong>Change:</strong> 
                            <span class="price-change ${changeClass}">${changeSign}${signal.change.toFixed(2)}%</span>
                        </div>
                    </div>
                    <div class="timestamp">
                        üïê ${signal.timestamp}
                        ${signal.isMock ? '‚Ä¢ üîÑ MOCK DATA' : '‚Ä¢ ‚úÖ LIVE DATA'}
                    </div>
                `;

                this.container.appendChild(signalElement);
            }

            async generateSignal() {
                try {
                    const useCrypto = Math.random() > 0.5;
                    let signal;
                    
                    if (useCrypto) {
                        try {
                            signal = await this.fetchCryptoData();
                            this.updateStatus('crypto', true);
                        } catch (error) {
                            signal = this.generateMockSignal('crypto');
                        }
                    } else {
                        try {
                            signal = await this.fetchForexData();
                            this.updateStatus('forex', true);
                        } catch (error) {
                            signal = this.generateMockSignal('forex');
                        }
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–≥–Ω–∞–ª –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞
                    this.signals.unshift(signal);
                    
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤
                    if (this.signals.length > 20) {
                        this.signals = this.signals.slice(0, 20);
                    }
                    
                    this.renderSignals();
                    
                } catch (error) {
                    console.error('Error generating signal:', error);
                    const mockSignal = this.generateMockSignal(Math.random() > 0.5 ? 'crypto' : 'forex');
                    this.signals.unshift(mockSignal);
                    this.renderSignals();
                }
            }

            async start() {
                this.container.innerHTML = '<div class="loading">Loading first signal...</div>';
                
                // –ü–µ—Ä–≤—ã–π —Å–∏–≥–Ω–∞–ª
                await this.generateSignal();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
                setInterval(() => {
                    this.generateSignal();
                }, 60000);

                console.log('üöÄ Trading Signal Bot Started!');
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è
        document.addEventListener('DOMContentLoaded', () => {
            const bot = new TradingSignalFrontend();
            bot.start();
        });
    </script>
</body>
</html>
